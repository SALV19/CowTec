<!-- KPI Card Molecule -->
<div class="kpi-card kpi-card-<%= typeof bgColor !== 'undefined' ? bgColor : 'primary' %><%= typeof additionalClasses !== 'undefined' && additionalClasses ? ' ' + additionalClasses : '' %>">
  <div class="kpi-card-body">
    <div class="kpi-card-content">
      <h6 class="kpi-card-title"><%= title %></h6>
      <div class="kpi-value-wrapper">
        <h2 class="kpi-value-display" id="<%= id %>">
          <%- include('../atoms/kpi-value', {
            value: value,
            prefix: typeof prefix !== 'undefined' ? prefix : undefined,
            suffix: typeof suffix !== 'undefined' ? suffix : undefined,
            id: typeof valueId !== 'undefined' ? valueId : undefined
          }) %>
        </h2>
      </div>
      <% if (typeof change !== 'undefined' && change) { %>
        <div class="kpi-change">
          <%- include('../atoms/badge', {
            text: change,
            variant: 'light',
            additionalClasses: 'kpi-change-badge',
            icon: (typeof changeType !== 'undefined' && changeType) === 'increase' ? 'arrow-up' : 'arrow-down'
          }) %>
        </div>
      <% } %>
    </div>
    <div class="kpi-card-icon">
      <div class="kpi-icon-wrapper">
        <%- include('../atoms/icon', { name: icon, additionalClasses: 'kpi-icon-fa' }) %>
      </div>
    </div>
  </div>

  <!-- Optional progress indicator -->
  <% if (typeof progress !== 'undefined' && progress) { %>
    <div class="kpi-progress-section">
      <%- include('../atoms/progress', {
        value: progress.value,
        height: '4px',
        variant: 'light',
        additionalClasses: 'kpi-progress-bar'
      }) %>
      <small class="kpi-progress-label"><%= progress.label || 'Progress' %></small>
    </div>
  <% } %>

  <!-- Decorative elements -->
  <div class="kpi-card-decoration">
    <%- include('../atoms/icon', { name: icon, additionalClasses: 'kpi-decoration-icon' }) %>
  </div>
</div>